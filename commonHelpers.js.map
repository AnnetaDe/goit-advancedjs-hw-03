{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["export * from \"./pixabay-api.js\";\n\nexport const fetchPhotosByQuery = query => {\n  const API_KEY = \"3024031-50bf2ca6b1e9bc3513f045fb3\";\n  const searchParams = new URLSearchParams({\n    key: API_KEY,\n    q: query,\n    image_type: \"photo\",\n    orientation: \"horizontal\",\n    safesearch: \"true\"\n  });\n  console.log(searchParams.toString());\n  const urlbold = 'https://pixabay.com/api/'\n  // https://pixabay.com/api/?key=3024031-50bf2ca6b1e9bc3513f045fb3&q=yellow+flowers&image_type=photo\n  // https://pixabay.com/api/?key=3024031-50bf2ca6b1e9bc3513f045fb3&query=13&image_type=photo&orientation=horizontal&safesearch=true\n\n  const baseUrl = `${urlbold}?${searchParams.toString()}`;\n  console.log(baseUrl);\n\n  return fetch(baseUrl).then(response => {\n    if (!response.ok) {\n      throw new Error(response.status);\n    }\n    if (response.status === 404) {\n      throw new Error(\"Not Found\");\n    }\n    return response.json();\n  });\n};\n","export * from \"./render-functions.js\";\n\n// library imports\nimport iziToast from \"izitoast\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n// function imports\nimport { fetchPhotosByQuery } from \"./pixabay-api.js\";\nconst gallery = document.querySelector(\".gallery\");\nconst loader = document.querySelector(\".loader\");\n\ndocument.body.appendChild(loader);\n\nfunction createGalleryItemMarkup({\n  linkWeb,\n  linkBig,\n  tags,\n  likes,\n  views,\n  comments,\n  downloads\n}) {\n  const galleryItem = `\n<li class=\"picture-and-data-item\">\n<div class=\"img-container\">\n  <a class=\"image-link\" href=\"${linkBig}\">\n    <img class=\"image\" src=\"${linkWeb}\" alt=\"${tags}\" />\n  </a>\n</div>\n<ul class=\"under-picture-list\">\n  <li class=\"under-picture-info-item\">Likes <span class=\"data-received\">${likes}</span></li>\n  <li class=\"under-picture-info-item\">Views <span class=\"data-received\">${views}</span></li>\n  <li class=\"under-picture-info-item\">Comments <span class=\"data-received\">${comments}</span></li>\n  <li class=\"under-picture-info-item\">Downloads <span class=\"data-received\">${downloads}</span></li>\n</ul>\n</li>\n`;\n  return galleryItem;\n}\nfunction createGalleryMarkup(images) {\n  return images.map(createGalleryItemMarkup).join(\"\");\n}\n\nfunction renderGallery(images) {\n  const markup = createGalleryMarkup(images);\n  gallery.insertAdjacentHTML(\"beforeend\", markup);\n}\n\nfunction clearGallery() {\n  gallery.innerHTML = \"\";\n}\n\nfunction showToast(message, type = \"info\") {\n  iziToast[type]({\n    message,\n    position: \"topCenter\"\n  });\n}\nfunction showLoader() {\n  loader.classList.add(\"is-visible\");\n}\nfunction hideLoader() {\n  loader.classList.remove(\"is-visible\");\n}\n\nfunction checkQuery(params) {\n  if (!params || !params.query) {\n    showToast(\"Invalid search query\", \"error\");\n    return false;\n  }\n  return true;\n}\nfunction checkData(data) {\n  if (!data || !data.hits || data.hits.length === 0) {\n    showToast(\"No images found\", \"error\");\n    return false;\n  }\n  return true;\n}\n\nfunction getImagesByQuery(query) {\n  return fetchPhotosByQuery(query)\n    .then(data => {\n      if (!checkData(data)) {\n        return [];\n      }\n      return data.hits.map(img => ({\n        linkWeb: img.webformatURL,\n        linkBig: img.largeImageURL,\n        tags: img.tags,\n        likes: img.likes,\n        views: img.views,\n        comments: img.comments,\n        downloads: img.downloads\n      }));\n    })\n    .catch(error => {\n      console.error(\"Error fetching images:\", error);\n      showToast(\"Error fetching images\", \"error\");\n      return [];\n    });\n}\n\nexport { renderGallery, clearGallery, showLoader, hideLoader, showToast, checkQuery, getImagesByQuery };\n","\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport { renderGallery, clearGallery, showLoader, hideLoader, showToast, checkQuery, getImagesByQuery } from \"./js/render-functions.js\";\n\nexport const onSearchFormSubmit = event => {\n    event.preventDefault();\n    const query = event.target.elements.picture_search.value.trim();\n  \n    if (!checkQuery({ query })) {\n      return;\n    }\n    showLoader();\n    clearGallery();\n    getImagesByQuery(query)\n      .then(images => {\n        if (images.length > 0) {\n          renderGallery(images);\n          showToast(`Found ${images.length} images`, \"success\");\n          let lightbox;\n          if (!lightbox) {\n            lightbox = new SimpleLightbox(\".gallery a\", {\n              captionsData: \"alt\",\n              captionDelay: 250,\n            });\n          } else {\n            lightbox.refresh();\n          }\n      \n        } else {\n          showToast(\"No images found\", \"error\");\n        }\n      })\n      .finally(() => {\n        hideLoader();\n      });\n   \n  };\n\nconst searchForm = document.querySelector(\".form\");\nsearchForm.addEventListener(\"submit\", onSearchFormSubmit);\n"],"names":["fetchPhotosByQuery","query","API_KEY","searchParams","baseUrl","response","gallery","loader","createGalleryItemMarkup","linkWeb","linkBig","tags","likes","views","comments","downloads","createGalleryMarkup","images","renderGallery","markup","clearGallery","showToast","message","type","iziToast","showLoader","hideLoader","checkQuery","params","checkData","data","getImagesByQuery","img","error","onSearchFormSubmit","event","lightbox","SimpleLightbox","searchForm"],"mappings":"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"}