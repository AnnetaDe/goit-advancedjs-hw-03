{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js"],"sourcesContent":["export * from \"./pixabay-api.js\";\n\nexport const fetchPhotosByQuery = query => {\n  const API_KEY = \"3024031-50bf2ca6b1e9bc3513f045fb3\";\n  const searchParams = new URLSearchParams({\n    key: API_KEY,\n    q: query,\n    image_type: \"photo\",\n    orientation: \"horizontal\",\n    safesearch: \"true\"\n  });\n  console.log(searchParams.toString());\n  const urlbold = 'https://pixabay.com/api/'\n  // https://pixabay.com/api/?key=3024031-50bf2ca6b1e9bc3513f045fb3&q=yellow+flowers&image_type=photo\n  // https://pixabay.com/api/?key=3024031-50bf2ca6b1e9bc3513f045fb3&query=13&image_type=photo&orientation=horizontal&safesearch=true\n\n  const baseUrl = `${urlbold}?${searchParams.toString()}`;\n  console.log(baseUrl);\n\n  return fetch(baseUrl).then(response => {\n    if (!response.ok) {\n      throw new Error(response.status);\n    }\n    if (response.status === 404) {\n      throw new Error(\"Not Found\");\n    }\n    return response.json();\n  });\n};\n","export * from \"./render-functions.js\";\n\n// library imports\nimport iziToast from \"izitoast\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n// function imports\nimport { fetchPhotosByQuery } from \"./pixabay-api.js\";\nconst searchForm = document.querySelector(\".form\");\nconst galleryUl = document.querySelector(\".gallery\");\nconst loaderEl = document.querySelector(\".loader\");\n\n\nfunction createGalleryItemMarkup({\n  linkWeb,\n  linkBig,\n  tags,\n  likes,\n  views,\n  comments,\n  downloads\n}) {\n  const galleryItem = `\n<li class=\"picture-and-data-item\">\n<div class=\"img-container\">\n  <a class=\"image-link\" href=\"${linkBig}\">\n    <img class=\"image\" src=\"${linkWeb}\" alt=\"${tags}\" />\n  </a>\n</div>\n<ul class=\"under-picture-list\">\n  <li class=\"under-picture-info-item\">Likes <span class=\"data-received\">${likes}</span></li>\n  <li class=\"under-picture-info-item\">Views <span class=\"data-received\">${views}</span></li>\n  <li class=\"under-picture-info-item\">Comments <span class=\"data-received\">${comments}</span></li>\n  <li class=\"under-picture-info-item\">Downloads <span class=\"data-received\">${downloads}</span></li>\n</ul>\n</li>\n`;\n  return galleryItem;\n}\nconst onSearchFormSubmit = event => {\n  event.preventDefault();\n  const query = event.target.elements.picture_search.value.trim();\n\n  if (query === \"\") {\n    galleryUl.innerHTML = \"\";\n    event.target.reset();\n    iziToast.error({\n      title: \"Error\",\n      message: \"Please enter a search query\",\n      position: \"topCenter\"\n    });\n    return;\n  }\n  loaderEl.classList.add(\"is-visible\");\n\n  fetchPhotosByQuery(query)\n    .finally(() => {\n      loaderEl.classList.remove(\"is-visible\");\n    })\n    .then(data => {\n      const linksTags = data.hits.map(img => {\n        return {\n          linkWeb: img.webformatURL,\n          linkBig: img.largeImageURL,\n          tags: img.tags,\n          likes: img.likes,\n          views: img.views,\n          comments: img.comments,\n          downloads: img.downloads\n        };\n      });\n      if (data.totalHits === 0) {\n        iziToast.error({\n          title: \"Error\",\n          message: \"No images found\",\n          position: \"topCenter\"\n        });\n        return;\n      }\n\n\n\n      galleryUl.innerHTML = \"\";\n      const galleryItemsMarkup = linksTags\n        .map(createGalleryItemMarkup)\n        .join(\"\");\n\n      galleryUl.insertAdjacentHTML(\"beforeend\", galleryItemsMarkup);\n\n      iziToast.success({\n        title: \"Success\",\n        message: `Found ${data.totalHits} images`,\n        position: \"topCenter\"\n      });\n      searchForm.reset();\n\n\n      let lightbox;\n      if (!lightbox) {\n        lightbox = new SimpleLightbox(\".image-link\", {\n          focus: true,\n          captionsData: \"alt\",\n          captionDelay: 250\n        });\n      }\n    lightbox.refresh();\n\n    })\n    .catch(error => {\n      console.log(error);\n    });\n};\n\nsearchForm.addEventListener(\"submit\", onSearchFormSubmit);\n"],"names":["fetchPhotosByQuery","query","API_KEY","searchParams","baseUrl","response","searchForm","galleryUl","loaderEl","createGalleryItemMarkup","linkWeb","linkBig","tags","likes","views","comments","downloads","onSearchFormSubmit","event","iziToast","data","linksTags","img","galleryItemsMarkup","lightbox","SimpleLightbox","error"],"mappings":"6vBAEO,MAAMA,EAAqBC,GAAS,CACzC,MAAMC,EAAU,oCACVC,EAAe,IAAI,gBAAgB,CACvC,IAAKD,EACL,EAAGD,EACH,WAAY,QACZ,YAAa,aACb,WAAY,MAChB,CAAG,EACD,QAAQ,IAAIE,EAAa,SAAU,CAAA,EAKnC,MAAMC,EAAU,4BAAcD,EAAa,SAAU,CAAA,GACrD,eAAQ,IAAIC,CAAO,EAEZ,MAAMA,CAAO,EAAE,KAAKC,GAAY,CACrC,GAAI,CAACA,EAAS,GACZ,MAAM,IAAI,MAAMA,EAAS,MAAM,EAEjC,GAAIA,EAAS,SAAW,IACtB,MAAM,IAAI,MAAM,WAAW,EAE7B,OAAOA,EAAS,MACpB,CAAG,CACH,ECpBMC,EAAa,SAAS,cAAc,OAAO,EAC3CC,EAAY,SAAS,cAAc,UAAU,EAC7CC,EAAW,SAAS,cAAc,SAAS,EAGjD,SAASC,EAAwB,CAC/B,QAAAC,EACA,QAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACF,EAAG,CAgBD,MAfoB;AAAA;AAAA;AAAA,gCAGUL,CAAO;AAAA,8BACTD,CAAO,UAAUE,CAAI;AAAA;AAAA;AAAA;AAAA,0EAIuBC,CAAK;AAAA,0EACLC,CAAK;AAAA,6EACFC,CAAQ;AAAA,8EACPC,CAAS;AAAA;AAAA;AAAA,CAKvF,CACA,MAAMC,EAAqBC,GAAS,CAClCA,EAAM,eAAc,EACpB,MAAMjB,EAAQiB,EAAM,OAAO,SAAS,eAAe,MAAM,OAEzD,GAAIjB,IAAU,GAAI,CAChBM,EAAU,UAAY,GACtBW,EAAM,OAAO,QACbC,EAAS,MAAM,CACb,MAAO,QACP,QAAS,8BACT,SAAU,WAChB,CAAK,EACD,MACD,CACDX,EAAS,UAAU,IAAI,YAAY,EAEnCR,EAAmBC,CAAK,EACrB,QAAQ,IAAM,CACbO,EAAS,UAAU,OAAO,YAAY,CAC5C,CAAK,EACA,KAAKY,GAAQ,CACZ,MAAMC,EAAYD,EAAK,KAAK,IAAIE,IACvB,CACL,QAASA,EAAI,aACb,QAASA,EAAI,cACb,KAAMA,EAAI,KACV,MAAOA,EAAI,MACX,MAAOA,EAAI,MACX,SAAUA,EAAI,SACd,UAAWA,EAAI,SACzB,EACO,EACD,GAAIF,EAAK,YAAc,EAAG,CACxBD,EAAS,MAAM,CACb,MAAO,QACP,QAAS,kBACT,SAAU,WACpB,CAAS,EACD,MACD,CAIDZ,EAAU,UAAY,GACtB,MAAMgB,EAAqBF,EACxB,IAAIZ,CAAuB,EAC3B,KAAK,EAAE,EAEVF,EAAU,mBAAmB,YAAagB,CAAkB,EAE5DJ,EAAS,QAAQ,CACf,MAAO,UACP,QAAS,SAASC,EAAK,SAAS,UAChC,SAAU,WAClB,CAAO,EACDd,EAAW,MAAK,EAGhB,IAAIkB,EACCA,IACHA,EAAW,IAAIC,EAAe,cAAe,CAC3C,MAAO,GACP,aAAc,MACd,aAAc,GACxB,CAAS,GAELD,EAAS,QAAO,CAEpB,CAAK,EACA,MAAME,GAAS,CACd,QAAQ,IAAIA,CAAK,CACvB,CAAK,CACL,EAEApB,EAAW,iBAAiB,SAAUW,CAAkB"}